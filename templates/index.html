<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Chatbot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="app">
    <div class="header">
        <h2>AI Chatbot</h2>
    </div>

    <div id="chat-area" class="chat-area">
        <div class="message bot">
            <div class="bubble">
                Hello! I’m your AI chatbot. How can I help you?
            </div>
        </div>
    </div>

    <div class="input-area">
        <input
            id="msg"
            type="text"
            placeholder="Send a message..."
            autocomplete="off"
        >
        <button onclick="send()">➤</button>
    </div>
</div>

<script>
function send() {
    const input = document.getElementById("msg");
    const chatArea = document.getElementById("chat-area");
    const message = input.value.trim();

    if (!message) return;

    // User message
    chatArea.innerHTML += `
        <div class="message user">
            <div class="bubble">${message}</div>
        </div>
    `;

    input.value = "";
    chatArea.scrollTop = chatArea.scrollHeight;

    fetch("/chat", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ message: message })
    })
    .then(response => response.json())
    .then(data => {
        chatArea.innerHTML += `
            <div class="message bot">
                <div class="bubble">${data.reply}</div>
            </div>
        `;
        chatArea.scrollTop = chatArea.scrollHeight;
    });
}

// ✅ ENTER KEY SUPPORT (DO NOT TOUCH)
document.getElementById("msg").addEventListener("keypress", function (e) {
    if (e.key === "Enter") {
        send();
    }
});
</script>

</body>
</html>
